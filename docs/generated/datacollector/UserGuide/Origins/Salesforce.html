
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="The Salesforce origin reads data from Salesforce. You can configure the origin to read data in one or both of the following ways: Execute a query to read existing data from Salesforce using the Bulk ..." /><meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Salesforce" /><meta name="DC.Relation" scheme="URI" content="../../../datacollector/UserGuide/Origins/Origins_title.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="concept_odf_vr3_rx" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css?buildId=@@WEBHELP_BUILD_NUMBER@@"><!----></link><title>Salesforce</title><!--  Generated with Oxygen version @@WEBHELP_VERSION@@, build number @@WEBHELP_BUILD_NUMBER@@.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css?buildId=@@WEBHELP_BUILD_NUMBER@@"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css?buildId=@@WEBHELP_BUILD_NUMBER@@" /><script type="text/javascript"><!--
          
          var prefix = "../../../index.html";
          
          --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-3.1.1.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/log.js?buildId=@@WEBHELP_BUILD_NUMBER@@"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js?buildId=@@WEBHELP_BUILD_NUMBER@@"><!----></script>
  <!--
  Copyright 2018 StreamSets Inc.
  
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
  <script type="text/javascript">
    <!--
    var parentWindow = window.name;
    console.log("1. " + parentWindow);
    if (!(parentWindow == "frm" || parentWindow == "contentwin")) {
        var currHash = window.location.hash.substr(1);
        console.log("2. " + currHash);
        console.log("3. " + currHash.indexOf("datacollector/UserGuide/"));

        if ( currHash.indexOf("datacollector/UserGuide/") == -1 ) {
            window.location.hash = "#datacollector/UserGuide/" + currHash;
        }
    }
-->
  </script>
</head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../datacollector/UserGuide/Origins/Origins_title.html" title="Origins">Origins</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../datacollector/UserGuide/Origins/Origins_title.html" title="Origins"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Origins</span></a></span>  </span></td></tr></tbody></table>
<div class="nested0" id="concept_odf_vr3_rx">
    <h1 class="title topictitle1">Salesforce</h1>

    <div class="body conbody">
        <p class="p">The Salesforce origin reads
            data from Salesforce. You can configure the origin to read data in one or both of the
            following ways: </p>

        <ul class="ul" id="concept_odf_vr3_rx__ul_kr4_1np_tx">
            <li class="li">Execute a query to read existing data from Salesforce using the Bulk API or SOAP
                API. </li>

            <li class="li">Subscribe to notifications to process PushTopic or platform events.</li>

        </ul>

        <p class="p">When processing existing data, you configure the SOQL query, offset field, and optional
            initial offset to use. When using the Bulk API, you can enable PK Chunking to
            efficiently process very large volumes of data.</p>

        <p class="p">When processing existing data and not subscribed to notifications, you can configure the
            origin to repeat the SOQL query. The origin can perform a full or incremental read at
            specified intervals. And under certain circumstances, you can also process deleted
            records. </p>

        <p class="p">When subscribing to notifications to process events, you specify the event type and API
            or topic name. When processing platform events, you can also specify a replay property. </p>

        <p class="p">By default, the origin generates Salesforce record header attributes and Salesforce field
            attributes that provide additional information about each record and field. The origin
            also <span class="ph">includes the CRUD operation type in a record header attribute
                        so generated records can be easily processed by CRUD-enabled destinations.
                        For an overview of <span class="ph">Data Collector</span> changed data
                        processing and a list of CRUD-enabled destinations, see <a class="xref" href="../Pipeline_Design/CDC-Overview.html#concept_apw_l2c_ty">Processing Changed Data</a>.</span></p>

        <p class="p">You can specify the prefix to use for Salesforce attributes or disable attribute
            generation altogether. You can also optionally disable query validation or use an HTTP
            proxy to connect to Salesforce. </p>

        <p class="p">When enabled in Salesforce, you can configure the origin to use mutual authentication to
            connect to Salesforce.</p>

        <p class="p">The origin can generate events for an event stream. For
                  more information about dataflow triggers and the event framework, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">Dataflow Triggers Overview</a>. </p>

    </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_djn_x4c_tx">
    <h2 class="title topictitle2">Query Existing Data</h2>

    
    <div class="body conbody"><p class="shortdesc">The Salesforce origin can execute a query to read existing data from Salesforce. Use
        the Salesforce Object Query Language (SOQL) to write the query.</p>

        <p class="p">When
            you configure the origin to query existing data, you specify whether the origin uses the
            Salesforce Bulk API or SOAP API to read from Salesforce. The Bulk API is optimized to
            process large sets of data. When using the Bulk API, you can enable PK Chunking for
            larger data sets. The SOAP API supports more complex queries than the Bulk API, but is
            less practical when processing large sets of data. For more information about when to
            use the Bulk or SOAP API, see the Salesforce Developer documentation. </p>

        <p class="p">The Salesforce origin uses an offset field and an initial offset or start ID to determine
            where to start reading data within an object. By default, the offset field is defined as
            the Salesforce <samp class="ph systemoutput">Id</samp> system field, which contains a unique
            identifier for each record in a Salesforce object. </p>

        <p class="p">When you configure the origin to query existing data and do not subscribe to
            notifications, you can configure the origin to run the query once or to repeat the
            query. When running the query once, the pipeline stops when it finishes reading all data
            from the Salesforce object. If you start the pipeline again, the origin uses the initial
            offset or start ID to start reading, reading the entire set of existing data again. </p>

        <p class="p">If the pipeline stops before it finishes reading all data, the Salesforce origin saves
            the last read offset value. When the pipeline starts again, the origin uses the last
            read offset value to continue processing from where it stopped. You can reset the origin
            to process all requested objects. </p>

        <p class="p">When you configure the origin to run the query more than once, the pipeline runs
            continuously so it can repeat the query at regular intervals. You can choose how the
            origin repeats the query. For more information, see <a class="xref" href="Salesforce.html#concept_owv_nj5_2z">Repeat Query</a>.</p>

    </div>

</div>
<div class="topic concept nested1" id="concept_vdt_dxc_tx">
    <h2 class="title topictitle2">Using the SOAP and Bulk API</h2>

    <div class="body conbody">
        <p class="p">You can use the SOAP or
            Bulk API to query existing Salesforce data. When querying existing data, you define the
            SOQL query and related properties to determine the data returned from Salesforce.</p>

        <div class="p">Use the following guidelines when using the SOAP API or the Bulk API without PK Chunking:<dl class="dl">
                
                    <dt class="dt dlterm">SOQL query</dt>

                    <dd class="dd">
                        <div class="p">When processing existing data with the SOAP API or the Bulk API, use the
                            following query guidelines: <ul class="ul" id="concept_vdt_dxc_tx__ul_wnl_s1n_5cb">
                                <li class="li">In the WHERE clause, include the offset field and the offset
                                        value.<p class="p">The origin uses an offset field and value to
                                        determine the data that is returned. Include both in the
                                        WHERE clause of the query.</p>
</li>

                                <li class="li">In the WHERE clause, use the OFFSET constant to represent the
                                    offset value.<div class="p">Use ${OFFSET} to represent the offset value. For
                                        example, when you start a pipeline, the following query
                                        returns all data from the object where the data in the
                                        offset field is greater than the initial offset
                                        value:<pre class="pre codeblock">SELECT Id, Name FROM &lt;object&gt; WHERE &lt;offset field&gt; &gt; ${OFFSET}</pre>
</div>
<div class="note tip"><span class="tiptitle">Tip:</span> When the offset values are strings, enclose
                                        ${OFFSET} in single quotation marks.</div>
</li>

                                <li class="li">
                                    <p class="p">In the ORDER BY clause, include the offset field as the first
                                        field.</p>

                                    <p class="p">To avoid returning duplicate data, use the offset field as
                                        the first field in the ORDER BY clause.</p>

                                    <div class="p">
                                        <div class="note note"><span class="notetitle">Note:</span> Using a field that is not the
                                                <samp class="ph systemoutput">Id</samp> field in the ORDER
                                            BY clause can slow performance. </div>

                                    </div>

                                </li>

                            </ul>
</div>

                        <p class="p">The complete SOQL query should use the following syntax:</p>

                        <pre class="pre codeblock">SELECT &lt;offset field&gt;, &lt;field1&gt;, &lt;field2&gt;, ... FROM &lt;object&gt; WHERE &lt;offset field&gt; &gt; ${OFFSET} ORDER BY &lt;offset field&gt;</pre>

                        <p class="p">If you specify <samp class="ph codeph">SELECT * FROM &lt;object&gt;</samp> in the
                  SOQL query, the origin expands <samp class="ph codeph">*</samp> to all fields in the Salesforce
                  object that are accessible to the configured user. Note that the origin adds
                  components of compound fields to the query, rather than adding the compound fields
                  themselves. For example, the origin adds BillingStreet, BillingCity, etc., rather
                  than adding BillingAddress. Similarly, it adds Location__Latitude__s and
                  Location__Longitude__s rather than Location__c.</p>

                    </dd>

                    <dd class="dd">
                        <p class="p"><span class="ph" id="concept_vdt_dxc_tx__d47352e1843">When necessary, you can
                        configure the origin to skip validating the query. Skip query validation
                        when you know that the query is valid but it does not match validation
                        requirements.</span> For example, you might disable query validation to
                  improve performance on a large query by omitting the ORDER BY clause. <span class="ph" id="concept_vdt_dxc_tx__d47352e1846">To disable query validation, use the Disable
                        Query Validation property on the Advanced tab.</span></p>

                    </dd>

                
                
                    <dt class="dt dlterm">Additional properties</dt>

                    <dd class="dd">When processing existing data with the SOAP API or the Bulk API, configure
                        the following additional properties on the Query tab:<ul class="ul" id="concept_vdt_dxc_tx__ul_yqs_rbn_5cb">
                            <li class="li">Offset Field - Typically the <samp class="ph systemoutput">Id</samp> system
                                field, the offset field should be an indexed field in the record.
                                Default is the <samp class="ph systemoutput">Id</samp> field.</li>

                            <li class="li">Initial Offset - <span class="ph">First offset value to use when the pipeline starts or
                        after you reset the origin.</span></li>

                            <li class="li">Include Deleted Records - An optional property. <span class="ph">Determines whether the SOQL query also retrieves deleted
        records from the Salesforce recycle bin.</span>
                                <p class="p"><span class="ph">The query can
         retrieve deleted records when the stage uses the Salesforce SOAP API or the Bulk API
         version 39.0 or later. Earlier versions of the Bulk API do not support retrieving deleted
         records.</span></p>
</li>

                        </ul>
</dd>

                
            </dl>
</div>

    </div>

<div class="topic concept nested2" id="concept_n5z_hgh_tx">
    <h3 class="title topictitle3">Example</h3>

    <div class="body conbody">
        <p class="p">Let's assume that you want to read all
            names and account numbers from the Salesforce Account object a single time. The object
            contains a fair number of records, so you choose to use the Salesforce Bulk API. </p>

        <div class="p">To process the data, you configure the following properties on the Query tab:<ul class="ul" id="concept_n5z_hgh_tx__ul_cjm_kcg_5cb">
                <li class="li">Use Bulk API - Enable the use of the Bulk API. </li>

                <li class="li">SOQL Query - Include the offset field and offset value in the WHERE and ORDER BY
                    clauses, as well as the fields to return, as follows:
                    <pre class="pre codeblock">SELECT Id, Name, AccountNumber FROM Account WHERE Id &gt; '${OFFSET}' ORDER BY Id</pre>
</li>

                <li class="li">Repeat Query - Set to No Repeat to run the query a single time.</li>

                <li class="li">Initial Offset - Use the default value of fifteen zeros
                        (<samp class="ph codeph">000000000000000</samp>) for the offset value to ensure that the
                    origin reads all records in the object. </li>

                <li class="li">Offset Field - Use the default, <samp class="ph codeph">Id</samp>, for the offset field. </li>

            </ul>
</div>

    </div>

</div>
</div>
<div class="topic concept nested1" id="concept_aq1_kd1_5cb">
    <h2 class="title topictitle2">Using the Bulk API with PK Chunking</h2>

    <div class="body conbody">
        <p class="p">You can use PK Chunking with the Bulk
            API to process large volumes of Salesforce data. PK Chunking uses the
                <samp class="ph systemoutput">Id</samp> field as the offset field and returns chunks of data
            based on user-defined chunks of the <samp class="ph systemoutput">Id</samp> field. For more
            information about PK Chunking, see the <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/async_api_headers_enable_pk_chunking.htm?search_text=chunking" target="_blank">Salesforce documentation</a> or this informative
                <a class="xref" href="https://developer.salesforce.com/blogs/engineering/2015/03/use-pk-chunking-extract-large-data-sets-salesforce.html" target="_blank">blog post</a>.</p>

        <p class="p">When performing PK Chunking, the origin cannot process deleted records.</p>

        <p class="p">Use the following guidelines when using the Bulk API with PK Chunking to process existing
            data:</p>

        <dl class="dl">
            
                <dt class="dt dlterm">SOQL query</dt>

                <dd class="dd">Use the following query guidelines:<ul class="ul" id="concept_aq1_kd1_5cb__ul_ztg_ctm_5cb">
                        <li class="li">Include the <samp class="ph systemoutput">Id</samp> field in the SELECT
                            statement.</li>

                        <li class="li">Optionally include a WHERE clause, but do not use the
                                <samp class="ph systemoutput">Id</samp> field in the WHERE clause.</li>

                        <li class="li">Do not include an ORDER BY clause.</li>

                    </ul>
</dd>

                <dd class="dd">
                    <p class="p">The complete SOQL query for PK Chunking should use the following syntax:</p>

                    <pre class="pre codeblock">SELECT Id, &lt;field1&gt;, &lt;field2&gt;, ... [WHERE &lt;condition without the Id field&gt;] FROM &lt;object&gt;</pre>

                </dd>

                <dd class="dd">
                    <p class="p">If you specify <samp class="ph codeph">SELECT * FROM &lt;object&gt;</samp> in the
                  SOQL query, the origin expands <samp class="ph codeph">*</samp> to all fields in the Salesforce
                  object that are accessible to the configured user. Note that the origin adds
                  components of compound fields to the query, rather than adding the compound fields
                  themselves. For example, the origin adds BillingStreet, BillingCity, etc., rather
                  than adding BillingAddress. Similarly, it adds Location__Latitude__s and
                  Location__Longitude__s rather than Location__c.</p>

                </dd>

            
            
                <dt class="dt dlterm">Additional properties</dt>

                <dd class="dd">
                    <p class="p">Configure the following additional properties on the Query tab:</p>

                    <ul class="ul" id="concept_aq1_kd1_5cb__ul_zkd_dxf_5cb">
                        <li class="li">Offset Field - The field to use for chunking. Must use the default
                                <samp class="ph systemoutput">Id</samp> field.</li>

                        <li class="li">Chunk Size - <span class="ph">The range of values in the <samp class="ph systemoutput">Id</samp>
                        field to be queried at one time.</span>
                            <span class="ph">The default is 100,000 and the maximum size is
                        250,000.</span></li>

                        <li class="li">Start ID - <span class="ph">An optional lower boundary for the first chunk. When omitted,
                        the origin begins processing with the first record in the object.</span></li>

                    </ul>

                </dd>

                <dd class="dd">For example, when using a chunk size of 250,000 and a start ID of
                    001300000000000, the first query returns data with Id values starting with
                    001300000000000 with a chunk size of 250,000. The second query returns the next
                    chunk of records.</dd>

                <dd class="dd">When using PK Chunking, the origin ignores the Initial Offset property and uses
                    the optional Start ID instead.</dd>

            
        </dl>

    </div>

<div class="topic concept nested2" id="concept_dsb_ycg_5cb">
    <h3 class="title topictitle3">Example</h3>

    <div class="body conbody">
        <p class="p">Say you want to replicate all data from
            the Salesforce Order object. The object contains a large number of records, so you want
            to use the Salesforce Bulk API with PK chunking.</p>

        <div class="p">To process the data, you configure the following properties on the Query tab:<ul class="ul" id="concept_dsb_ycg_5cb__ul_cjm_kcg_5cb">
                <li class="li">Use Bulk API - Enable the use of the Bulk API. </li>

                <li class="li">Use PK Chunking - Enable the use of PK Chunking. PK Chunking must also be
                    enabled in your Salesforce environment.</li>

                <li class="li">Chunk Size - Set the chunk size to define the range values in the Id field that
                    can be queried at one time. Use the maximum of 250,000 to return as many records
                    as possible.</li>

                <li class="li">Start Id - To process all available data, do not enter a value for this
                    property. This property is used instead of Initial Offset to determine the lower
                    boundary of the <samp class="ph codeph">Id</samp> values to process.</li>

                <li class="li">SOQL Query - To process all data in the Order object, use the following query:
                        <pre class="pre codeblock">SELECT * FROM Order</pre>
<p class="p">Note that PK Chunking queries
                        do not include an ORDER BY clause.</p>
</li>

                <li class="li">Repeat Query - Set to No Repeat to run the query a single time.</li>

                <li class="li">Initial Offset - Skip this property since PK Chunking uses the Start Id property
                    instead.</li>

                <li class="li">Offset Field - Use the default, <samp class="ph codeph">Id</samp>, for the offset field. </li>

            </ul>
</div>

    </div>

</div>
</div>
<div class="topic concept nested1" id="concept_owv_nj5_2z">
    <h2 class="title topictitle2">Repeat Query</h2>

    <div class="body conbody">
        <p class="p">When the
            Salesforce origin processes existing data and is not subscribed to notifications, it can
            repeat the specified query at regular intervals. You can configure the origin to repeat
            a full or incremental query: </p>

        <div class="p">
            <dl class="dl">
                
                    <dt class="dt dlterm">Full query</dt>

                    <dd class="dd">When the origin repeats a full query, it runs the defined query using the
                        initial offset or start ID as the offset value in the query each time it
                        requests data.</dd>

                    <dd class="dd">Repeat a full query to capture all record updates. You might use a Record
                        Deduplicator in the pipeline to minimize repeated records. Not ideal for
                        objects with large numbers of records.</dd>

                
                
                    <dt class="dt dlterm">Incremental query</dt>

                    <dd class="dd">When the Salesforce origin repeats an incremental query, it uses the initial
                        offset or start ID as the offset value in the first query. </dd>

                    <dd class="dd">As the origin completes processing the results of the first query, it saves
                        the last offset value that it processes. When it repeats the query, it uses
                        the last-saved offset to perform an incremental query. The incremental query
                        processes only the subset of data that arrived after the last query. When
                        necessary, you can reset the origin to use the initial offset or start ID
                        value. </dd>

                    <dd class="dd">Repeat an incremental query for append-only objects or when you do not need
                        to capture changes to older records.</dd>

                
            </dl>

        </div>

    </div>

</div>
<div class="topic concept nested1" id="concept_nnd_y4c_tx">
    <h2 class="title topictitle2">Subscribing to Notifications</h2>

    <div class="body conbody">
        <div class="p">The Salesforce origin can subscribe to
            notifications to process the following Salesforce event types:<ul class="ul" id="concept_nnd_y4c_tx__ul_xsn_k3g_5cb">
                <li class="li">PushTopic events from the Streaming API to receive notifications for changes to
                    Salesforce data</li>

                <li class="li">Platform events from CometD to process event-driven data</li>

            </ul>
</div>

    </div>

</div>
<div class="topic concept nested1" id="concept_xws_n3g_5cb">
    <h2 class="title topictitle2">Processing PushTopic Events</h2>

    <div class="body conbody">
        <p class="p">To configure the origin to subscribe to PushTopic
            event messages, you must first create a PushTopic in Salesforce based on a SOQL query.
            The PushTopic query defines which record create, update, delete, or undelete events
            generate a notification. If the record changes match the criteria of the PushTopic
            query, a notification is generated and received by subscribed clients. </p>

        <p class="p">The Salesforce origin is the client that subscribes to the PushTopic. In the origin
            configuration, you specify the name of the PushTopic, which subscribes the origin to the
            PushTopic channel.</p>

        <p class="p">When you start a pipeline configured to subscribe to Salesforce notifications, the
            pipeline runs continuously, receiving any changed data events in the origin as records. </p>

        <div class="note note"><span class="notetitle">Note:</span> The Streaming API stores PushTopic events for 24 hours. If the pipeline stops and then
            restarts within 24 hours, the origin can receive notifications about past events.
            However, if the pipeline is inactive for more than 24 hours, the origin might miss some
            events.</div>

        <p class="p">For more information about creating PushTopic queries, see the Salesforce Streaming API
            developer documentation.</p>

    </div>

<div class="topic concept nested2" id="concept_ec1_qlq_tx">
  <h3 class="title topictitle3">PushTopic Event Record Format</h3>

  <div class="body conbody">
    <p class="p">When the PushTopic encounters a change event that generates
      a notification, it sends the event to the subscribing Salesforce origin as a JSON message in
      the following format:</p>

    <pre class="pre codeblock">{
  "channel": "/topic/AccountUpdates",
  "clientId": "j24ylcz8l0t0fyp0pze6uzpqlt",
  "data": {
    "event": {
      "createdDate": "2016-09-15T06:01:40.000+0000",
      "type": "updated"
    },
    "sobject": {
      "AccountNumber": "3221320",
      "Id": "0013700000dC9xLAAS",
      "Name": "StreamSets",
      ...more fields...
    }
  }
}</pre>

    <p class="p">The <samp class="ph codeph">data/event/type</samp> property indicates the type of change - created,
      updated, deleted, or undeleted.</p>

    <p class="p">When the Salesforce origin receives the data, it creates a record with field names and values
      corresponding to the <samp class="ph codeph">data/sobject</samp> property of the message. </p>

    <p class="p">The record also includes record header attributes corresponding to the
        <samp class="ph codeph">data/event</samp> property of the message, as described in <a class="xref" href="Salesforce.html#concept_psx_1wg_cy" title="The Salesforce origin generates Salesforce record header attributes that provide additional information about each record, such as the source objects for the record. The origin receives these details from Salesforce.">Salesforce Header Attributes</a>.</p>

  </div>

</div>
</div>
<div class="topic concept nested1" id="concept_cwb_mkg_5cb">
    <h2 class="title topictitle2">Processing Platform Events</h2>

    <div class="body conbody">
        <p class="p">The Salesforce origin uses CometD to subscribe to platform
            events. Before processing platform events, set up the platform event channel name and
            define the platform event in your Salesforce environment. </p>

        <p class="p">When you configure the origin, you specify the channel name and the set of event messages
            to process. The origin can process events in the channel from the last 24 hours, as well
            as any new events. Or it can process only the new events that arrive after you start the
            pipeline.</p>

        <p class="p">For more information about platform events, see the <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.platform_events.meta/platform_events/platform_events_intro.htm" target="_blank">Salesforce documentation</a>.</p>

    </div>

</div>
<div class="topic concept nested1" id="concept_m13_xrc_tx">
 <h2 class="title topictitle2">Reading Custom Objects or Fields</h2>

 
 <div class="body conbody"><p class="shortdesc">If the origin reads custom Salesforce objects or fields, you might want to use a Field
        Renamer in the pipeline to rename the custom fields.</p>

  <p class="p">If you extend Salesforce objects, custom object and field names are appended with the suffix
                <samp class="ph codeph">__c</samp>. For example, if you create a custom Transaction object,
            Salesforce names the object <samp class="ph codeph">Transaction__c</samp>. The Transaction object
            might contain fields named <samp class="ph codeph">Credit_Card__c, Fare_Amount__c, and
                Payment_Type__c</samp>. </p>

        <p class="p">Instead of using field names appended with the suffix <samp class="ph codeph">__c</samp> throughout the
            rest of the pipeline, you can add a Field Renamer to remove the suffix from the field
            names.</p>

        <p class="p">For more information about Salesforce custom objects, see the Salesforce
            documentation.</p>

 </div>

</div>
<div class="topic concept nested1" id="concept_r24_j11_5cb">
    <h2 class="title topictitle2">Processing Deleted Records</h2>

    <div class="body conbody">
        <p class="p">The
            Salesforce origin can retrieve deleted records from the Salesforce recycle bin for
            processing.</p>

        <div class="p">The origin can process deleted records in either of the following conditions:<ul class="ul" id="concept_r24_j11_5cb__ul_mhv_wb1_5cb">
                <li class="li">Using the SOAP API version <span class="ph">39.0</span> or later.</li>

                <li class="li">Using the Bulk API version <span class="ph">39.0</span> or later, when not using PK Chunking.</li>

            </ul>
</div>

        <p class="p">To process deleted records, use the Include Deleted Records property on the Query
            tab.</p>

    </div>

</div>
<div class="topic concept nested1" id="concept_qgj_hd2_kz">
 <h2 class="title topictitle2">Salesforce Attributes</h2>

 
 <div class="body conbody"><p class="shortdesc">The Salesforce origin generates Salesforce record header attributes and Salesforce field
        attributes that provide additional information about each record and field. The origin
        receives these details from Salesforce.</p>

        <p class="p">Salesforce attributes include a user-defined prefix to differentiate the Salesforce
            attributes from other attributes. By default, the prefix is "salesforce.". You can
            change the prefix that the origin uses and you can configure the origin not to create
            Salesforce attributes.</p>

 </div>

<div class="topic concept nested2" id="concept_psx_1wg_cy">
 <h3 class="title topictitle3">Salesforce Header Attributes</h3>

 
 <div class="body conbody"><p class="shortdesc">The Salesforce origin generates Salesforce record header attributes that provide
        additional information about each record, such as the source objects for the record. The
        origin receives these details from Salesforce.</p>

        <p class="p">You can use the
                <samp class="ph codeph">record:attribute</samp> or <samp class="ph codeph">record:attributeOrDefault</samp>
            functions to access the information in the attribute. </p>

        <p class="p">The Salesforce origin can provide the following Salesforce header attributes:</p>

        <div class="p">
            
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_psx_1wg_cy__table_w4g_kqh_cy" class="table" frame="border" border="1" rules="all">
                    
                    
                    <thead class="thead" align="left">
                        <tr>
                            <th class="entry" valign="top" width="30%" id="d408793e823">Salesforce Header Attribute</th>

                            <th class="entry" valign="top" width="70%" id="d408793e826">Description</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr>
                            <td class="entry" valign="top" width="30%" headers="d408793e823 ">&lt;Salesforce prefix&gt;.sobjectType</td>

                            <td class="entry" valign="top" width="70%" headers="d408793e826 ">Provides the Salesforce source object for the record.
                                    <p class="p">Generated when the origin executes a query or subscribes to
                                    notifications.</p>
</td>

                        </tr>

                        <tr>
                            <td class="entry" valign="top" width="30%" headers="d408793e823 ">&lt;Salesforce prefix&gt;.cdc.createdDate</td>

                            <td class="entry" valign="top" width="70%" headers="d408793e826 ">Provides the date that the Salesforce PushTopic encountered the
                                change event.<p class="p">Generated when the origin subscribes to
                                    notifications.</p>
</td>

                        </tr>

                        <tr>
                            <td class="entry" valign="top" width="30%" headers="d408793e823 ">&lt;Salesforce prefix&gt;.cdc.type</td>

                            <td class="entry" valign="top" width="70%" headers="d408793e826 ">Provides the type of change that the Salesforce PushTopic
                                encountered - created, updated, deleted, or undeleted.<p class="p">Generated
                                    when the origin subscribes to notifications.</p>
</td>

                        </tr>

                    </tbody>

                </table>
</div>

        </div>

        <p class="p">For more information about record header attributes, see <a class="xref" href="../Pipeline_Design/RecordHeaderAttributes.html#concept_wn2_jcz_dz">Record Header Attributes</a>.</p>

    </div>

</div>
<div class="topic concept nested2" id="concept_yns_y2m_5y">
 <h3 class="title topictitle3">CRUD Operation Header Attribute</h3>

 <div class="body conbody">
        <p class="p">When the Salesforce origin subscribes to
            notifications and reads changed data from a PushTopic, the origin includes the CRUD
            operation type for a record in the sdc.operation.type header attribute.</p>

        <p class="p">If you use a CRUD-enabled destination in the pipeline such as
                  JDBC Producer or Elasticsearch, the destination can use the operation type when
                  writing to destination systems. When necessary, you can use an Expression
                  Evaluator or scripting processors to manipulate the value in the
                  sdc.operation.type header attribute. For an overview of <span class="ph">Data Collector</span> changed data
                  processing and a list of CRUD-enabled destinations, see <a class="xref" href="../Pipeline_Design/CDC-Overview.html#concept_apw_l2c_ty">Processing Changed Data</a>.</p>

        <div class="p">The Salesforce origin uses the following values in the sdc.operation.type record header
            attribute to represent the operation type: <ul class="ul" id="concept_yns_y2m_5y__ul_dkt_g5l_dy">
                <li class="li">1 for INSERT</li>

                <li class="li">2 for DELETE</li>

                <li class="li">3 for UPDATE</li>

                <li class="li">5 for unsupported operations</li>

                <li class="li">6 for UNDELETED</li>

            </ul>
<div class="note tip"><span class="tiptitle">Tip:</span> Records that are undeleted contain only the record ID. If you need
                the record data, you can use the Salesforce Lookup to retrieve it. </div>
</div>

    </div>

</div>
<div class="topic concept nested2" id="concept_ysd_532_kz">
 <h3 class="title topictitle3">Salesforce Field Attributes</h3>

 
 <div class="body conbody"><p class="shortdesc">The Salesforce origin generates Salesforce field attributes that provide additional
        information about each field, such as the data type of the Salesforce field. The origin
        receives these details from Salesforce.</p>

        <p class="p">You can use the
                <samp class="ph codeph">record:fieldAttribute</samp> or
                <samp class="ph codeph">record:fieldAttributeOrDefault</samp> functions to access the information
            in the attribute. </p>

        <p class="p">The Salesforce origin can provide the following Salesforce field attributes:</p>

        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_ysd_532_kz__table_fw5_vr2_kz" class="table" frame="border" border="1" rules="all">
    
    
    <thead class="thead" align="left">
     <tr>
      <th class="entry" valign="top" width="30%" id="d408793e974">Salesforce Field Attribute</th>

      <th class="entry" valign="top" width="70%" id="d408793e977">Description</th>

     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td class="entry" valign="top" width="30%" headers="d408793e974 ">&lt;Salesforce prefix&gt;salesforceType</td>

      <td class="entry" id="concept_ysd_532_kz__d47442e4158" valign="top" width="70%" headers="d408793e977 ">Provides the original Salesforce data type for the field.</td>

     </tr>

     <tr>
      <td class="entry" valign="top" width="30%" headers="d408793e974 ">&lt;Salesforce prefix&gt;length</td>

      <td class="entry" id="concept_ysd_532_kz__d47442e4167" valign="top" width="70%" headers="d408793e977 ">Provides the original length for all string and textarea
       fields. </td>

     </tr>

     <tr>
      <td class="entry" valign="top" width="30%" headers="d408793e974 ">&lt;Salesforce prefix&gt;precision</td>

      <td class="entry" valign="top" width="70%" headers="d408793e977 ">Provides the original precision for all double fields. </td>

     </tr>

     <tr>
      <td class="entry" valign="top" width="30%" headers="d408793e974 ">&lt;Salesforce prefix&gt;scale</td>

      <td class="entry" id="concept_ysd_532_kz__d47442e4185" valign="top" width="70%" headers="d408793e977 ">Provides the original scale for all double fields. </td>

     </tr>

     <tr>
      <td class="entry" valign="top" width="30%" headers="d408793e974 ">&lt;Salesforce prefix&gt;digits</td>

      <td class="entry" valign="top" width="70%" headers="d408793e977 ">Provides the maximum number of digits for all integer fields.</td>

     </tr>

    </tbody>

   </table>
</div>

        <p class="p">For more information about field attributes, see <a class="xref" href="../Pipeline_Design/FieldAttributes.html#concept_xfm_wtp_1z" title="Field attributes are attributes that provide additional information about each field that you can use in pipeline logic, as needed.">Field Attributes</a>.</p>

 </div>

</div>
</div>
<div class="topic concept nested1" id="concept_cvb_bvr_kz">
 <h2 class="title topictitle2">Event Generation</h2>

    <div class="body conbody">
        <p class="p">The Salesforce origin <span class="ph"><span class="ph" id="concept_cvb_bvr_kz__d47352e2110">can generate events that you can use in an event stream. When you
                              enable event generation, the origin generates an event when it
                              completes processing the data returned by the specified</span> query.
                  </span></p>

        <div class="p">Salesforce events can be used in any logical way. For example: <ul class="ul" id="concept_cvb_bvr_kz__ul_znq_hf1_4z">
                <li class="li" id="concept_cvb_bvr_kz__li-UseCase-PFinisher-IncrementalOrigins">With the Pipeline Finisher executor
                    to stop the pipeline and transition the pipeline to a Finished state when the
                    origin completes processing available data.<p class="p">When you restart a pipeline
                        stopped by the Pipeline Finisher executor, the origin processes data based
                        on how you configured the origin. For example, if you configure the origin
                        to repeat an incremental query, the origin saves the offset when the
                        executor stops the pipeline. When it restarts, the origin continues
                        processing from the last-saved offset. If you configure the origin to repeat
                        a full query, when you restart the pipeline, the origin uses the initial
                        offset.</p>
<p class="p">For an example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_kff_ykv_lz">Case Study: Stop the Pipeline</a>.</p>
</li>

                <li class="li">With the Email executor to send a custom email
                              after receiving an event.<p class="p">For an example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_t2t_lp5_xz">Case Study: Sending Email</a>.</p>
</li>

            </ul>
<ul class="ul" id="concept_cvb_bvr_kz__ul_fjm_fhs_kz">
                        <li class="li">
                              <p class="p">With a destination to store information about completed queries. </p>

                              <p class="p">For an example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_ocb_nnl_px">Case Study: Event Storage</a>.</p>

                        </li>

                  </ul>
</div>

        <p class="p"><span class="ph">For more information about dataflow
                        triggers and the event framework, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">Dataflow Triggers Overview</a>.</span></p>

    </div>

<div class="topic concept nested2" id="concept_gym_czr_kz">
 <h3 class="title topictitle3">Event Record</h3>

 <div class="body conbody">
        <div class="p">Event records generated by the Salesforce origin
            have the following event-related record header attributes:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_gym_czr_kz__table_x35_bzs_kz" class="table" frame="border" border="1" rules="all">
     
     
     <thead class="thead" align="left">
      <tr>
       <th class="entry" valign="top" width="30%" id="d408793e1150">Record Header Attribute</th>

       <th class="entry" valign="top" width="70%" id="d408793e1153">Description</th>

      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td class="entry" valign="top" width="30%" headers="d408793e1150 ">sdc.event.type</td>

       <td class="entry" valign="top" width="70%" headers="d408793e1153 ">Event type. Uses the following type:<ul class="ul" id="concept_gym_czr_kz__d47442e2172">
         <li class="li" id="concept_gym_czr_kz__d47442e2174">no-more-data - Generated when the origin completes processing
          all data returned by a query.</li>

        </ul>
</td>

      </tr>

      <tr>
       <td class="entry" valign="top" width="30%" headers="d408793e1150 ">sdc.event.version</td>

       <td class="entry" valign="top" width="70%" headers="d408793e1153 ">An integer that indicates the version of the event record type.</td>

      </tr>

      <tr>
       <td class="entry" valign="top" width="30%" headers="d408793e1150 ">sdc.event.creation_timestamp</td>

       <td class="entry" id="concept_gym_czr_kz__d47442e2127" valign="top" width="70%" headers="d408793e1153 ">Epoch timestamp when the stage created the event.
       </td>

      </tr>

     </tbody>

    </table>
</div>
</div>

        <p class="p">The no-more-data event record includes no record fields.</p>

 </div>

</div>
</div>
<div class="topic task nested1" id="task_ssp_krd_dy">
    <h2 class="title topictitle2">Changing the API Version</h2>

    <div class="body taskbody">
        <div class="section context">
            <p class="p"><span class="ph">Data Collector</span> ships with version <span class="ph">39.0</span> of the Salesforce Web Services Connector libraries. You can use a different
                Salesforce API version if you need to access functionality not present in version
                    <span class="ph">39.0</span>.</p>

        </div>

        <ol class="ol steps" id="task_ssp_krd_dy__steps_imt_zck_dy"><li class="li step stepexpand">
                <span class="ph cmd">On the <span class="ph uicontrol">Salesforce</span> tab, set the <span class="ph uicontrol">API
                        Version</span> property to the version that you want to use, for
                    example 36.0.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Download the relevant version of the following JAR files from Salesforce Web
                    Services Connector (WSC):</span>
                <ul class="ul choices" id="task_ssp_krd_dy__d81331e48">
                    <li class="li choice">
                        <p class="p">WSC JAR file - force-wsc-&lt;version&gt;.0.0.jar </p>

                    </li>

                    <li class="li choice">
                        <p class="p">Partner API JAR file - force-partner-api-&lt;version&gt;.0.0.jar</p>

                    </li>

                </ul>

                <div class="itemgroup info">
                    <p class="p">Where &lt;version&gt; is the API version number, for example, 36.</p>
 
                    <p class="p">For information about downloading libraries from Salesforce WSC, see <a class="xref" href="https://developer.salesforce.com/page/Introduction_to_the_Force.com_Web_Services_Connector" target="_blank">https://developer.salesforce.com/page/Introduction_to_the_Force.com_Web_Services_Connector</a>.</p>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">In the following <span class="ph">Data Collector</span> directory,
                    replace the default force-wsc-39.0.0.jar and force-partner-api-39.0.0.jar files
                    with the versioned JAR files that you downloaded:</span>
                <div class="itemgroup info">
                    <pre class="pre codeblock">$SDC_DIST/streamsets-libs/streamsets-datacollector-salesforce-lib/lib/</pre>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Restart <span class="ph">Data Collector</span>
                    for the changes to take effect.</span>
            </li>
</ol>

    </div>

</div>
<div class="topic task nested1" id="task_h1n_bs3_rx">
    <h2 class="title topictitle2">Configuring a Salesforce Origin</h2>

    <div class="body taskbody">
        <div class="section context">
            <p class="p">Configure a
                Salesforce origin to read data from Salesforce.</p>

        </div>

        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">In the Properties panel, on the <span class="keyword wintitle">General</span> tab, configure the
                    following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_h1n_bs3_rx__table_ac1_hss_5x" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d408793e1345">General Property</th>

                                    <th class="entry" valign="top" width="70%" id="d408793e1348">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
       <td class="entry" valign="top" width="30%" headers="d408793e1345 ">Name</td>

       <td class="entry" valign="top" width="70%" headers="d408793e1348 ">Stage name.</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d408793e1345 ">Description</td>

       <td class="entry" valign="top" width="70%" headers="d408793e1348 ">Optional description.</td>

      </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d408793e1345 ">Produce Events <a class="xref" href="Salesforce.html#concept_cvb_bvr_kz">
                                            <img class="image" id="task_h1n_bs3_rx__image_plp_tp2_px" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d408793e1348 ">Generates event records when events occur. Use for event
        handling. <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">
         <img class="image" id="task_h1n_bs3_rx__d47442e798" src="../../../reusable-content/datacollector/../../datacollector/UserGuide/Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d408793e1345 ">On Record Error <a class="xref" href="../Pipeline_Design/ErrorHandling.html#concept_atr_j4y_5r">
         <img class="image" id="task_h1n_bs3_rx__d47442e807" src="../../../reusable-content/datacollector/../../datacollector/UserGuide/Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

       <td class="entry" valign="top" width="70%" headers="d408793e1348 ">Error record handling for the stage: <ul class="ul" id="task_h1n_bs3_rx__d47442e811">
         <li class="li">Discard - Discards the record.</li>

         <li class="li">Send to Error - Sends the record to the pipeline for error handling.</li>

         <li class="li">Stop Pipeline - Stops the pipeline. </li>

        </ul>
</td>

      </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">On the <span class="ph uicontrol">Salesforce</span> tab, configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_h1n_bs3_rx__table_a1j_wk3_tx" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="33.33333333333333%" id="d408793e1441">Salesforce Property</th>

                                    <th class="entry" valign="top" width="66.66666666666666%" id="d408793e1444">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
      <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1441 ">Username</td>

      <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1444 ">Salesforce username in the following email format:
        <samp class="ph codeph">&lt;text&gt;@&lt;text&gt;.com</samp>. </td>

     </tr>

                                <tr>
      <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1441 ">Password</td>

      <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1444 ">Salesforce password.<p class="p">If the machine running <span class="ph">Data Collector</span> is outside the trusted IP range
        configured in your Salesforce environment, you must generate a security token and then set
        this property to the password followed by the security token. </p>
<p class="p">For example, if the
        password is abcd and the security token is 1234, then set this property to abcd1234. For
        more information on generating a security token, see <a class="xref" href="https://help.salesforce.com/articleView?id=user_security_token.htm&amp;type=0" target="_blank">Reset Your Security Token</a>.</p>

       <div class="note tip"><span class="tiptitle">Tip:</span> <span class="ph" id="task_h1n_bs3_rx__d47352e4741">To
                        secure sensitive information such as usernames and passwords, you can use
                              <a class="xref" href="../Pipeline_Configuration/RuntimeValues.html#concept_bs4_5nm_2s" title="Similar to runtime properties, runtime resources are values that you define in a file local to the Data Collector and call from within a pipeline. But with runtime resources, you can restrict the permissions for the files to secure sensitive information. Use runtime resources to load sensitive information from files at runtime.">runtime resources</a> or <span class="ph"><a class="xref" href="../Configuration/CredentialStores.html#concept_bt1_bpj_r1b" title="Data Collector pipeline stages communicate with external systems to read and write data. Many of these external systems require credentials - user names or passwords - to access the data. When you configure pipeline stages for these external systems, you define the credentials that the stage uses to connect to the system.">credential stores.</a></span></span></div>
</td>

     </tr>

                                <tr>
      <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1441 ">Auth Endpoint</td>

      <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1444 ">Salesforce SOAP API authentication endpoint. Enter one of the following values:<ul class="ul" id="task_h1n_bs3_rx__d47442e3611">
        <li class="li">login.salesforce.com - Use to connect to a Production or Developer Edition
         organization.</li>

        <li class="li">test.salesforce.com - Use to connect to a sandbox organization.</li>

       </ul>
<p class="p">Default is login.salesforce.com.</p>
</td>

     </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1441 ">API Version <a class="xref" href="Salesforce.html#task_ssp_krd_dy">
                                            <img class="image" id="task_h1n_bs3_rx__image_wgh_xch_er" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1444 ">Salesforce API version to use to connect to Salesforce.
        <p class="p">Default is <span class="ph">39.0</span>. If you change the version, you also must download the relevant JAR files from Salesforce
        Web Services Connector (WSC).</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1441 ">Query Existing Data</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1444 ">Determines whether to execute a query to read existing
                                        data from Salesforce.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1441 ">Subscribe to Notifications</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1444 ">Determines whether to subscribe to notifications to
                                        process event messages.</td>

                                </tr>

                                <tr>
       <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1441 ">Max Batch Size (records)</td>

       <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1444 ">Maximum number of records processed at one time. Honors values up to the <span class="ph">Data Collector</span> maximum batch size. <p class="p">Default is
         1000. The <span class="ph">Data Collector</span> default is
         1000.</p>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1441 ">Batch Wait Time (ms) <a class="xref" href="Origins_overview.html#concept_ypd_vgr_5q">
         <img class="image" id="task_h1n_bs3_rx__d47442e895" src="../../../reusable-content/datacollector/../../datacollector/UserGuide/Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

       <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1444 ">Number of milliseconds to wait before sending a partial or empty batch. </td>

      </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To query existing data, on the <span class="ph uicontrol">Query</span> tab, configure the
                    following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_h1n_bs3_rx__table_vg4_wl3_tx" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="33.33333333333333%" id="d408793e1619">Query Property <a class="xref" href="Salesforce.html#concept_djn_x4c_tx" title="The Salesforce origin can execute a query to read existing data from Salesforce. Use the Salesforce Object Query Language (SOQL) to write the query.">
                                            <img class="image" id="task_h1n_bs3_rx__image_wjh_ycl_br" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></th>

                                    <th class="entry" valign="top" width="66.66666666666666%" id="d408793e1629">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1619 ">Use Bulk API</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1629 ">Determines whether the stage uses the Salesforce Bulk API
                                        or SOAP API to write to Salesforce. Select to use the Bulk
                                        API. Clear to use the SOAP API.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1619 ">Use PK Chunking <a class="xref" href="Salesforce.html#concept_aq1_kd1_5cb">
                                            <img class="image" id="task_h1n_bs3_rx__image_dfq_wsg_5cb" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1629 ">Enables the use of PK Chunking to process large volumes
                                        of data. Requires configuring the SOQL query and additional
                                        properties. <p class="p">For the Bulk API only.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1619 ">Chunk Size</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1629 "><span class="ph">The range of values in the <samp class="ph systemoutput">Id</samp>
                        field to be queried at one time.</span><p class="p"><span class="ph">The default is 100,000 and the maximum size is
                        250,000.</span></p>
<p class="p">For PK Chunking only.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1619 ">Start ID</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1629 "><span class="ph">An optional lower boundary for the first chunk. When omitted,
                        the origin begins processing with the first record in the object.</span><p class="p">For PK Chunking only.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1619 ">SOQL Query</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1629 ">SOQL query to use when reading existing data from
                                        Salesforce. <p class="p">The SOQL query requirements differ <span class="ph">based on whether you use the <a class="xref" href="Salesforce.html#concept_vdt_dxc_tx">SOAP or Bulk API without PK Chunking</a> or the <a class="xref" href="Salesforce.html#concept_aq1_kd1_5cb">Bulk API with PK Chunking</a>.</span></p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1619 ">Include Deleted Records <a class="xref" href="Salesforce.html#concept_r24_j11_5cb">
                                            <img class="image" id="task_h1n_bs3_rx__image_lhh_34h_5cb" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1629 "><span class="ph">Determines whether the SOQL query also retrieves deleted
        records from the Salesforce recycle bin.</span><p class="p">The query can retrieve deleted records when the
                                            stage uses the Salesforce SOAP API or the Bulk API
                                            version 39.0 or later. </p>
<p class="p">This property cannot be
                                            used with the Bulk API when PK Chunking is
                                        enabled.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1619 ">Repeat Query <a class="xref" href="Salesforce.html#concept_owv_nj5_2z">
                                            <img class="image" id="task_h1n_bs3_rx__image_fxy_vkw_2z" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1629 ">Determines whether the origin runs the query more than
                                        once. Available when the origin processes existing data and
                                        is not subscribed to notifications. Uses one of the
                                        following properties:<ul class="ul" id="task_h1n_bs3_rx__ul_zkg_qkw_2z">
                                            <li class="li">Repeat Full Query - Repeats the query using the
                                                initial offset or start ID in each query. </li>

                                            <li class="li">Repeat Incremental Query - Repeats the query using
                                                the initial offset or start ID for the first query
                                                and then using the last-saved offset for subsequent
                                                queries.</li>

                                        </ul>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1619 ">Query Interval</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1629 ">Amount of time to wait between queries. Enter an
                                        expression based on a unit of time. You can use SECONDS,
                                        MINUTES, or HOURS. <p class="p">Default is 1 minute: ${1 * MINUTES}.
                                        </p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1619 ">Initial Offset</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1629 "><span class="ph">First offset value to use when the pipeline starts or
                        after you reset the origin.</span><p class="p">Default is fifteen zeros:
                                                <samp class="ph codeph">000000000000000</samp>.</p>
<p class="p">Not used
                                            when the origin performs PK Chunking.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1619 ">Offset Field </td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1629 ">Typically the <samp class="ph systemoutput">Id</samp> system
                                        field, the offset field should be an indexed field in the
                                        record. <p class="p">Default is the <samp class="ph systemoutput">Id</samp>
                                            field. Use the default when enabling PK Chunking.
                                        </p>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To subscribe to notifications, on the <span class="ph uicontrol">Subscribe</span> tab,
                    configure the following property:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_h1n_bs3_rx__table_ntq_jn3_tx" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="33.33333333333333%" id="d408793e1823">Subscribe Property</th>

                                    <th class="entry" valign="top" width="66.66666666666666%" id="d408793e1826">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1823 ">Subscription Type <a class="xref" href="Salesforce.html#concept_nnd_y4c_tx">
                                            <img class="image" id="task_h1n_bs3_rx__image_sch_nol_br" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1826 ">Select the subscription type to use:<ul class="ul" id="task_h1n_bs3_rx__ul_ey4_1zy_tcb">
                                            <li class="li"><a class="xref" href="Salesforce.html#concept_xws_n3g_5cb">Push Topic</a> - Use to process PushTopic
                                                events.</li>

                                            <li class="li"><a class="xref" href="Salesforce.html#concept_cwb_mkg_5cb">Platform Event</a> - Use to process platform
                                                events.</li>

                                        </ul>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1823 ">Platform Event API Name</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1826 ">Name of the platform event channel or topic to use, such
                                        as Notification__e. The platform event must be defined in
                                        your Salesforce environment.<p class="p">For platform events
                                        only.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1823 ">Replay Option</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1826 ">Determines the platform events that are processed:<ul class="ul" id="task_h1n_bs3_rx__ul_yf2_szy_tcb">
                                            <li class="li">New events - Only the events broadcast after the
                                                pipeline starts.</li>

                                            <li class="li">All events - All events broadcast in the last 24
                                                hours as well as any new events broadcast after the
                                                pipeline starts.</li>

                                        </ul>
<p class="p">For platform events only.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1823 ">Push Topic</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1826 ">The name of the PushTopic to use. The PushTopic must be
                                        defined in your Salesforce environment. <p class="p">For PushTopic
                                            events only.</p>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">On the <span class="keyword wintitle">Advanced</span> tab, configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_h1n_bs3_rx__table_qgc_5l2_kz" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="33.33333333333333%" id="d408793e1928">Advanced Property</th>

                                    <th class="entry" valign="top" width="66.66666666666666%" id="d408793e1931">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Create Salesforce Attributes <a class="xref" href="Salesforce.html#concept_qgj_hd2_kz" title="The Salesforce origin generates Salesforce record header attributes and Salesforce field attributes that provide additional information about each record and field. The origin receives these details from Salesforce.">
                                            <img class="image" id="task_h1n_bs3_rx__image_fjk_vkg_6z" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">Adds Salesforce header attributes to records and field
                                        attributes to fields. The origin creates Salesforce
                                        attributes by default. </td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Salesforce Attribute Prefix</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">Prefix for Salesforce attributes.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Disable Query Validation</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">Disables query validation for SOQL queries. Query
                                        validation <span class="ph">differs <span class="ph">based on whether you use the <a class="xref" href="Salesforce.html#concept_vdt_dxc_tx">SOAP or Bulk API without PK Chunking</a> or the <a class="xref" href="Salesforce.html#concept_aq1_kd1_5cb">Bulk API with PK Chunking</a>.</span></span></td>

                                </tr>

                                <tr>
      <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Use Proxy</td>

      <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">Specifies whether to use an HTTP proxy to connect to Salesforce.</td>

     </tr>
<tr>
      <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Proxy Hostname</td>

      <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">Proxy host.</td>

     </tr>
<tr>
      <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Proxy Port</td>

      <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">Proxy port.</td>

     </tr>
<tr>
      <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Proxy Requires Credentials</td>

      <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">Specifies whether the proxy requires a user name and password.</td>

     </tr>
<tr>
      <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Proxy Username</td>

      <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">User name for proxy credentials.</td>

     </tr>
<tr>
      <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Proxy Password</td>

      <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">Password for proxy credentials.<div class="note tip"><span class="tiptitle">Tip:</span> <span class="ph" id="task_h1n_bs3_rx__d47352e4741">To
                        secure sensitive information such as usernames and passwords, you can use
                              <a class="xref" href="../Pipeline_Configuration/RuntimeValues.html#concept_bs4_5nm_2s" title="Similar to runtime properties, runtime resources are values that you define in a file local to the Data Collector and call from within a pipeline. But with runtime resources, you can restrict the permissions for the files to secure sensitive information. Use runtime resources to load sensitive information from files at runtime.">runtime resources</a> or <span class="ph"><a class="xref" href="../Configuration/CredentialStores.html#concept_bt1_bpj_r1b" title="Data Collector pipeline stages communicate with external systems to read and write data. Many of these external systems require credentials - user names or passwords - to access the data. When you configure pipeline stages for these external systems, you define the credentials that the stage uses to connect to the system.">credential stores.</a></span></span></div>
</td>

     </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Use Mutual Authentication</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">When enabled in Salesforce, you can use SSL/TLS mutual
                                        authentication to connect to Salesforce. <p class="p">Mutual
                                            authentication is not enabled in Salesforce by default.
                                            To enable mutual authentication, contact Salesforce.
                                            </p>
<p class="p">Before enabling mutual authentication, you must
                                            store a <a class="xref" href="https://help.salesforce.com/articleView?id=security_keys_uploading_mutual_auth_cert.htm&amp;type=0" target="_blank">mutual authentication
                                                certificate</a> in the Data Collector resources
                                            directory. For more information, see <a class="xref" href="../Pipeline_Configuration/SSL-TLS.html#concept_kqb_rqf_5z">Keystore and Truststore Configuration</a>.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Keystore File <a class="xref" href="../Pipeline_Configuration/SSL-TLS.html#concept_kqb_rqf_5z">
                                            <img class="image" id="task_h1n_bs3_rx__d47645e3363" src="../../../reusable-content/datacollector/../../datacollector/UserGuide/Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">The path to the keystore file. Enter an absolute path to
                                        the file or a path relative to the <span class="ph">Data Collector</span> resources directory: <span class="ph filepath">$SDC_RESOURCES</span>.
                                                <p class="p"><span class="ph">For more information about environment variables, see
                              <a class="xref" href="../Configuration/DCEnvironmentConfig.html#concept_rng_qym_qr" title="Data Collector includes environment variables that define the directories used to store configuration, data, log, and resource files.When you run Data Collector as a service, Data Collector runs as the system user account and group defined in environment variables. The default system user and group are named sdc.Increase or decrease the Data Collector Java heap size as necessary, based on the resources available on the host machine. By default, the Java heap size is 1024 MB. You can enable remote debugging to debug a Data Collector instance running on a remote machine. You can define the Java garbage collector that Data Collector uses. By default, Data Collector uses the Concurrent Mark Sweep (CMS) garbage collector.Data Collector includes a Java Security Manager that is enabled by default. You can edit the SDC_ROOT_CLASSPATH environment variable to define the path to JAR files to be added to the Data Collector root classloader.">Data Collector Environment Configuration</a>.</span></p>
<p class="p">By default, no keystore is used. </p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Keystore Type</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">Type of keystore to use. Use one of the following
                                            types:<ul class="ul" id="task_h1n_bs3_rx__d47645e3385">
                                            <li class="li">Java Keystore File (JKS)</li>

                                            <li class="li">PKCS-12 (p12 file)</li>

                                        </ul>
<p class="p">Default is Java Keystore File (JKS). </p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Keystore Password</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">Password to the keystore file. A password is optional,
                                        but recommended.<div class="p">
                                            <div class="note tip"><span class="tiptitle">Tip:</span> To secure sensitive information such as
                  passwords, you can use <a class="xref" href="../Pipeline_Configuration/RuntimeValues.html#concept_bs4_5nm_2s" title="Similar to runtime properties, runtime resources are values that you define in a file local to the Data Collector and call from within a pipeline. But with runtime resources, you can restrict the permissions for the files to secure sensitive information. Use runtime resources to load sensitive information from files at runtime.">runtime resources</a> or <span class="ph"><a class="xref" href="../Configuration/CredentialStores.html#concept_bt1_bpj_r1b" title="Data Collector pipeline stages communicate with external systems to read and write data. Many of these external systems require credentials - user names or passwords - to access the data. When you configure pipeline stages for these external systems, you define the credentials that the stage uses to connect to the system.">credential stores.</a></span></div>

                                        </div>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="33.33333333333333%" headers="d408793e1928 ">Keystore Key Algorithm</td>

                                    <td class="entry" valign="top" width="66.66666666666666%" headers="d408793e1931 ">The algorithm used to manage the keystore. <p class="p">Default is
                                                <span class="ph">SunX509</span>.</p>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
</ol>

    </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../datacollector/UserGuide/Origins/Origins_title.html" title="Origins"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Origins</span></a></span>  </div><div class="footer" id="webhelp_copyright_information"><!-- Copyright 2018 StreamSets Inc. --><!-- SDC google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60917135-3', 'auto');
  ga('send', 'pageview');
</script></div>
</body>
</html>